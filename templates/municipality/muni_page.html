<html lang="en" class="translated-ltr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/static/css/next_styles.css" >
	<link rel="preload" as="script" fetchpriority="low" href="/static/css/%5Bturbopack%5D_browser_dev_hmr-client_hmr-client_ts_bae88007._.js">

	<script src="/static/js/brnLib.js"></script>
	<link rel="stylesheet" href="/static/css/x.css" >
	<link class="x-links" rel="stylesheet" href="/static/css/font-awesome.min.css">


	<meta name="next-size-adjust" content="">
	<meta name="description" content="着AD アプリケーションの管理システム">
	<meta name="generator" content="v0.app">
	<link rel="icon" href="/static/icons/icon-light-32x32.png" media="(prefers-color-scheme: light)">
	<link rel="icon" href="/static/icons/icon-dark-32x32.png" media="(prefers-color-scheme: dark)">
	<link rel="icon" href="/static/icons/icon.svg" type="image/svg+xml">
	<link rel="apple-touch-icon" href="/static/icons/apple-icon.png">
	<link rel="preload" href="/static/fonts/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2">
	<link rel="preload" href="/static/fonts/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2">
	<style>@font-face{font-family:'__nextjs-Geist';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-latin-ext.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'__nextjs-Geist Mono';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-mono-latin-ext.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'__nextjs-Geist';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-latin.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'__nextjs-Geist Mono';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-mono-latin.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style>
</head>

<body class="font-sans antialiased">
	<div hidden=""></div>
	<div class="min-h-screen bg-background">
		<header class="border-b bg-card">
			<div class="container mx-auto px-4 py-6 max-w-7xl">
				<div class="flex items-center justify-between">
					<div>
						<div class="">
							<div class="x-left x-padding x-container x-hide-small" style="max-width:30%">
								<img src="/static/icons/apple-icon.png">
							</div>
							<div>
								<h1 class="text-3xl font-bold text-balance">
									<font dir="auto" style="vertical-align: inherit;">
										<font dir="auto" style="vertical-align: inherit;">市町村管理ページ</font>
									</font>
								</h1>
								<p class="text-muted-foreground mt-1 x-small">
									<font dir="auto" style="vertical-align: inherit;">
										<font dir="auto" style="vertical-align: inherit;">市町村のコンテンツとステータスを管理する</font>
									</font>
								</p>
							</div>
						</div>
					</div>
					{% if user['status'] == 'emergency'%}
						{% set status_color = 'red' %}
					{% else %}
						{% set status_color = '' %}
					{% endif %}
					<div class="x-container x-right-align">
						<span class="x-small x-row x-hide-medium x-hide-small">
							<span class="x-text-grey">市町村ID</span> : <b>{{user['uid']}}</b><br>
							<span class="x-text-grey">市町村名</span> : <b>{{user['name']}}</b><br>
							<span class="x-text-grey">市長</span> : <b>{{user['mayor']}}</b><br>
						</span>
						<a href="/logout" class="x-button x-text-red x-round x-border x-border-red x-round x-row">
							<font dir="auto" style="vertical-align: inherit;">
								<font dir="auto" style="vertical-align: inherit;">ログアウト <span class="fa fa-sign-out"></span></font>
							</font>
						</a>
					</div>
				</div>
				<div class="x-pale-{{status_color}} mt-4 flex items-start gap-3 rounded-lg bg-blue-50 dark:bg-blue-950/20 p-4 border border-blue-200 dark:border-blue-900">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info size-5 text-blue-600 dark:text-blue-400 mt-0.5 shrink-0">
						<circle cx="12" cy="12" r="10"></circle>
						<path d="M12 16v-4"></path>
						<path d="M12 8h.01"></path>
					</svg>
					<p class="text-sm text-blue-900 dark:text-blue-100 x-container">
						<div class="x-col x-left">
							<strong class="font-semibold">
								<font dir="auto" style="vertical-align: inherit;">
									<font dir="auto" style="vertical-align: inherit;">重要:</font>
								</font>
							</strong>
							<font dir="auto" style="vertical-align: inherit;">
								<font dir="auto" style="vertical-align: inherit;">
									現在、あなたの市町村は 
									<b>{{user['status']}}</b> 
									モードです
								</font>
							</font>
						</div>
						<div class="x-col x-right">
							{% if user['status'] == 'normal'%}
							<a href="/municipal_set_status/{{user['uid']}}/emergency">
								<button class="x-right x-button x-red x-round-large">
									<span class="fa fa-warning"></span>&nbsp;
									緊急モードに切り替える
								</button>
							</a>
							{% else %}
								<a href="/municipal_set_status/{{user['uid']}}/normal">
									<button class="x-right x-button x-blue x-round-large">
										<span class="fa fa-warning"></span>&nbsp;
										通常モードに切り替える
									</button>
								</a>
							{% endif %}
						</div>
					</p>
				</div>
			</div>
		</header>
		<main class="container mx-auto px-4 py-8 max-w-7xl">
			<div data-slot="card" class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm">
				<div data-slot="card-header" class="@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6">
					<div data-slot="card-title" class="leading-none font-semibold">
						<font dir="auto" style="vertical-align: inherit;">
							<font dir="auto" style="vertical-align: inherit;">自治体コンテンツリスト</font>
						</font>
						<a href="/post_content_municipality" class="x-button x-blue x-round x-right">
							<font dir="auto" style="vertical-align: inherit;">
								<font dir="auto" style="vertical-align: inherit;">
									<span class="fa fa-plus-circle"></span> 新しいコンテンツを作成する
								</font>
							</font>
						</a>
					</div>

				</div>
				<div data-slot="card-content" class="px-6">
					<div class="overflow-x-auto">
						<div data-slot="table-container" class="relative w-full overflow-x-auto">
							<script>var ads = {}</script>

							<!-- +-------CHECKS IF EMPTY ADS--------+ -->
							{% set ns = namespace(counter=0) %}
							{% for m_id in municipal_content %}
							{% set content = municipal_content[m_id] %}
							{% if content['municipal_id']== user['uid'] %}
								{% set ns.counter = ns.counter + 1 %}
							{% endif %}
							{% endfor%}

							<!-- {% set ad_num = ns.counter %} -->
							{% if ad_num == 0 %}
							<div class="flex flex-col items-center justify-center">
								<span>
									まだ何も投稿されていないようです。
										<b class="x-text-blue">新しいコンテンツを作成する</b> ボタンをクリックして、
									広告を投稿してください。
								</span>
								<img src="/static/img/no_data.gif" alt="No data illustration" style="max-width:30%">
							</div>

							<!-- +---------------+ -->
							{% else %}
							<table data-slot="table" class="w-full caption-bottom text-sm">
								<thead data-slot="table-header" class="[&amp;_tr]:border-b">
									<tr data-slot="table-row" class="hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors">
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">名前/コンテンツID</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">説明</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">配布範囲</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">タイプ</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">アップロード日</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">コンテンツタイプ</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">位</font>
											</font>
										</th>
										<th data-slot="table-head" class="text-foreground h-10 px-2 align-middle font-medium whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px] text-right">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">手術</font>
											</font>
										</th>
									</tr>
								</thead>
								<tbody data-slot="table-body" class="[&amp;_tr:last-child]:border-0">
									{% for m_id in municipal_content %}
									{% set content = municipal_content[m_id] %}
									{% if content['municipal_id']== user['uid'] %}
									{% set _path = content['storagePath'] %}

									<tr data-slot="table-row" class="x-hover-pale-blue">
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px] font-mono text-sm">
											<a href="#" onclick="open_dialog('/view_ads_file?file_path={{_path}}')">
												<span class="fa fa-play-circle x-text-blue x-xlarge" title="View ads"></span>
											</a>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px] font-mono text-sm">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">
													{{content['title']}}
												</font><br>
												<i class="x-tiny x-text-grey">{{m_id}}</i>
											</font>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<div class="flex items-center gap-2"><span>
													<font dir="auto" style="vertical-align: inherit;">
														<font dir="auto" style="vertical-align: inherit;">{{content['description']}}</font>
													</font>
												</span></div>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">{{content['radiusMeters']}}</font>
											</font>
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">meters</font>
											</font>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">{{content['type']}}</font>
											</font>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											<font dir="auto" style="vertical-align: inherit;">
												<font dir="auto" style="vertical-align: inherit;">{{content['createdAt']}}</font>
											</font>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											{%if content['use_for'] in ['emergency']%}
												{% set color = "red"%}
											{%elif content['use_for'] in ['normal']%}
												{% set color = "blue"%}
											{% else %}
												{% set color = "grey"%}
											{%endif%}
											<span class="x-round-xxlarge x-{{color}}" style="padding: 5px;">
												{{content['use_for']}}
											</span>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px]">
											{%if content['status'] in ['rejected','suspended']%}
												{% set color = "red"%}
											{%elif content['status'] in ['under_review','refund_processing']%}
												{% set color = "yellow"%}
											{%elif content['status'] in ['published','refunded']%}
												{% set color = "green"%}
											{% else %}
												{% set color = "grey"%}
											{%endif%}
											<span class="x-round-xxlarge x-{{color}}" style="padding: 5px;">
												{{content['status']}}
											</span>
										</td>
										<td data-slot="table-cell" class="p-2 align-middle whitespace-nowrap [&amp;:has([role=checkbox])]:pr-0 [&amp;&gt;[role=checkbox]]:translate-y-[2px] text-right">
											<!-- <a href="/view_ads_file?file_path={{content['storagePath']}}" target="_blank"> -->
											&nbsp;
											&nbsp;
											<a href="/rmcontent/{{m_id}}">
												<span class="fa fa-trash x-text-red x-xlarge" title="Delete"></span>
											</a>
										</td>
									</tr>
									{% endif %}
									{% endfor %}
								</tbody>
							</table>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</main>

		<!-- The Modal -->
		<div id="id01" class="x-modal" style="background-color: rgba(, 0, 0, 0.5)" onclick="close_player()">
			<div class="x-modal-content x-round-large" style="max-width:50%;background-color: rgba(, 0, 0, 0.5)">
				<div class="ad_container">
				  <video id="ad_preview"
						 autoplay
						 controls
						 preload="none"
						 poster="loading_data.gif"
						 class="ad_video">
				  </video>
				</div>
				<style>
					.ad_container {
						display: flex;
						justify-content: center;  /* horizontal */
						align-items: center;      /* vertical */
						}

					.ad_video {
						max-width: 100%; 
						width: 100%;         /* Video takes full width of container */
						height: auto;        /* Keeps aspect ratio */
						display: block;
					}

				</style>

			</div>
		</div>
		<script>
			function open_dialog(_path,m_id){
				$ID('ad_preview').src = _path

				document.getElementById('id01').style.display='block'
				
			}

			function close_player(){
				document.getElementById('id01').style.display='none'
				$ID('ad_preview').pause();
				$ID('ad_preview').currentTime = 0;
			}

		</script>
	</div>
</body>

</html>