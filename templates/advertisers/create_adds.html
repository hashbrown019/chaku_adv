<html lang="ja" class="translated-ltr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/static/css/next_styles.css" >
	<!-- <link rel="preload" as="script" fetchpriority="low" href="/static/css/%5Bturbopack%5D_browser_dev_hmr-client_hmr-client_ts_bae88007._.js"> -->


	<script src="/static/js/brnLib.js"></script>
	<link rel="stylesheet" href="/static/css/x.css" >
	<link class="x-links" rel="stylesheet" href="/static/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
		integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
		crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
		integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
		crossorigin=""></script>

	<meta name="next-size-adjust" content="">
	<meta name="description" content="着AD アプリケーションの管理システム">
	<meta name="generator" content="v0.app">
	<link rel="icon" href="/static/icons/icon-light-32x32.png" media="(prefers-color-scheme: light)">
	<link rel="icon" href="/static/icons/icon-dark-32x32.png" media="(prefers-color-scheme: dark)">
	<link rel="icon" href="/static/icons/icon.svg" type="image/svg+xml">
	<link rel="apple-touch-icon" href="/static/icons/apple-icon.png">
	<link rel="preload" href="/static/fonts/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2">
	<link rel="preload" href="/static/fonts/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2">
	<style>@font-face{font-family:'__nextjs-Geist';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-latin-ext.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'__nextjs-Geist Mono';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-mono-latin-ext.woff2) format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'__nextjs-Geist';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-latin.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'__nextjs-Geist Mono';font-style:normal;font-weight:400 600;font-display:swap;src:url(/__nextjs_font/geist-mono-latin.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}

		.upload-container {
			border: 2px dashed #ccc;
			padding: 20px;
			text-align: center;
		}
	</style>
	<title>Advertiser Management Screen</title>
</head>

<body class="font-sans antialiased">
   
	<div hidden=""></div>
	<div class="min-h-screen bg-background">
		<header class="border-b bg-card">
			<div class="container mx-auto px-4 py-6 max-w-7xl">
				<div class="flex items-center justify-between">
					<div>
						<div class="">
							<div class="x-left x-padding x-container x-hide-small" style="max-width:30%">
								<img src="/static/icons/apple-icon.png">
							</div>
							<div>
								<h1 class="text-3xl font-bold text-balance">
									<font dir="auto" style="vertical-align: inherit;">
										<font dir="auto" style="vertical-align: inherit;">受信広告管理ページ</font>
									</font>
								</h1>
								<p class="text-muted-foreground mt-1 x-small">
									<font dir="auto" style="vertical-align: inherit;">
										<font dir="auto" style="vertical-align: inherit;">広告を管理し、レビューステータスを確認する</font>
									</font>
								</p>
							</div>
						</div>
					</div>
					<div class="x-container x-right-align">
						<span class="x-small x-row x-hide-medium x-hide-small">
							<span class="x-text-grey">広告主ID</span> : <b >{{user['uid']}}</b><br>
							<span class="x-text-grey">広告主名</span> : <b >{{user['name']}}</b><br>
							<span class="x-text-grey">マネージャー</span> : <b >{{user['manager']}}</b><br>
						</span>
						<a href="/logout" class="x-button x-text-red x-round x-border x-border-red x-round x-row">
							<font dir="auto" style="vertical-align: inherit;">
								<font dir="auto" style="vertical-align: inherit;">ログアウト <span class="fa fa-sign-out"></span></font>
							</font>
						</a>
					</div>

				</div>
				<div class="mt-4 flex items-start gap-3 rounded-lg bg-blue-50 dark:bg-blue-950/20 p-4 border border-blue-200 dark:border-blue-900"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info size-5 text-blue-600 dark:text-blue-400 mt-0.5 shrink-0">
						<circle cx="12" cy="12" r="10"></circle>
						<path d="M12 16v-4"></path>
						<path d="M12 8h.01"></path>
					</svg>
					<p class="text-sm text-blue-900 dark:text-blue-100"><strong class="font-semibold">
							<font dir="auto" style="vertical-align: inherit;">
								<font dir="auto" style="vertical-align: inherit;">重要:</font>
							</font>
						</strong>
						<font dir="auto" style="vertical-align: inherit;">
							<font dir="auto" style="vertical-align: inherit;">広告料をお振り込みの際は、振込名の前に広告主IDをご記入ください。.</font>
						</font>
					</p>
				</div>
			</div>
		</header>
		<main class="container mx-auto px-4 py-8 max-w-4xl">
			<div data-slot="card" class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm">
				<div data-slot="card-header" class="@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6">
					<div data-slot="card-title" class="leading-none font-semibold">
						<font class="" dir="auto" style="vertical-align: inherit;">
							<font dir="auto" style="vertical-align: inherit;">広告を作成する</font>
							<br><br>
							<span class="x-text-grey x-small">すべてのフィールドを完全に入力してください</span>
						</font>
					</div>
				</div>
				<div data-slot="card-content x-padding x-margin" class="px-6">
					<form action="/upload_ads" method="POST" enctype="multipart/form-data" class="space-y-6">
						<div class="x-third x-container">
							<label>タイトル</label>
							<input type="text" name="advertiserId" class="" value="{{user['uid']}}" hidden>
							<input type="text" name="title" class="x-input x-round x-border" required>

							<label>説明</label>
							<textarea type="text" name="description" class="x-input x-round x-border" required></textarea>

							<label>広告の種類</label>
							<select name="type" class="x-input x-round x-border" required>
								<option value="audio" selected>Audio Format</option>
								<option value="video" selected>Video Format</option>
							</select>

							<label>表示まで</label>
							<input type="date" name="deliveryPeriod" class="x-input x-round x-border" required>

							<br>
							<span class="x-small x-left x-pale-yellow x-leftbar x-border-yellow"><b>NOTE:</b> 広告を高速に読み込むために、アップロードするファイルは4.2MB以下にすることをお勧めします。モバイルデータ通信を利用するモバイル端末では、広告をよりスムーズかつ高速に表示できます。</span>
							<br><br>
							<div class="x-row">
								<div class="upload-container">
									<input type="file" name="storagePath" id="storagePath" accept="audio/*, video/*" style="display: none;" required>
									<label for="storagePath" class="upload-button x-button x-blue x-round-large">
										<span class="fa fa-upload"></span> ファイルをアップロード
									</label>
									
									<video id="image-preview" controls onloadedmetadata="this.currentTime=3" src="#" alt="Image preview..." style="display: none; max-width: 100%; height: auto;"></video>
								</div>
							</div>
						</div>
						<div class="x-twothird">
							<div id="map" class="x-round-large" style="height: 180px;height: 300px;"></div>
							
							<label>場所と配達範囲</label>
							<hr>
							<span class="x-small x-text-grey">広告の中心を見つけるには地図をクリックしてください</span>
							<div class="x-row">
								<input class="x-third x-input" id="lat" name="lat" placeholder="lat: click on map">
								<input class="x-third x-input" id="lng" name="lng" placeholder="long: click on map">
								<select name="radiusMeters" class="x-third x-input x-round x-border" onchange="setmarkerradius(this.value)" required>
									<option value="0" selected disabled>範囲を選択（デフォルト：0km）</option>
									<option value="3000" >3 km</option>
									<option value="5000">5 km</option>
									<option value="10000">10 km</option>
								</select>
							</div>
							<br>
							<div class="x-container x-row">
								<div class="x-right">
									<a href="/dashboard/advertisers" class="x-button x-text-yellow x-round x-border-yellow x-border">
										<font dir="auto" style="vertical-align: inherit;">
											<font dir="auto" style="vertical-align: inherit;">
												<span class="fa fa-arrow-left"></span>変更を破棄して戻る
										</font>
									</a>
									<button type="submit" class="btn x-btn x-round x-blue">
									   <span class="fa fa-bullhorn"></span> 広告を投稿する
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</main>
	</div>
	<script>
		document.getElementById('storagePath').addEventListener('change', function(event) {
			var output = document.getElementById('image-preview');
			var file = event.target.files[0];

			if (file) {
				// Use URL.createObjectURL() for an efficient way to generate a preview URL
				output.src = URL.createObjectURL(file); 
				output.style.display = 'block'; // Show the image preview

				// Free memory when the image is loaded
				output.onload = function() {
					URL.revokeObjectURL(output.src);
				}
			} else {
				output.src = "";
				output.style.display = 'none';
			}
		});
		// ========================
		var INIT_MARKER = [26.2648635,127.7301947]

		var map = L.map('map').setView(INIT_MARKER, 12);
		L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
			maxZoom: 19,
			attribution: '---'
		}).addTo(map);
		$CLASS('leaflet-control-attribution')[0].innerHTML = ""

		var marker = L.marker(INIT_MARKER).addTo(map);
		var circleMarker = L.circle(INIT_MARKER, {
			color: 'teal',
			fillColor: '#b4ccfa',
			fillOpacity: 0.5,
			radius: 5 // Radius in pixels (constant screen size)
		}).addTo(map)

		function onMapClick(e) {
			// alert("You clicked the map at " + e.latlng);
			marker.setLatLng(e.latlng);
			circleMarker.setLatLng(e.latlng);
			println(e.latlng)
			$ID('lat').value = e.latlng["lat"]
			$ID('lng').value = e.latlng["lng"]
		}

		function setmarkerradius(val){
			circleMarker.setRadius(val)
		}

		map.on('click', onMapClick);
	</script>
</body>

</html>